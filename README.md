# Sokoban

## Общее

Для прорисовки используется библиотека Lanterna, осуществляющая печать в консоль запуска для Unix систем, и создающая
swing-окно для Windows.

На данный момент библиотека не имеет возможности запретить редактирование размеров окна.

Для преобразования в/из json используется библиотека jackson.

Конечная точка - точка, куда необходимо поместить ящик для прохождения уровня.

### Правила игры

Целью игры является расставить все ящики на конечные точки. Ящики можно только толкать.

Для управления персонажем можно использовать стрелочки или кнопки wasd.

Чтобы выйти из игры в любой момент, необходимо нажать на кнопку Esc.

### Описание уровней

Для начала игры необходимо запустить приложение командой ``sokoban play [file-name]``, где _file-name_ - имя файла 
с уровнем.

Уровень может быть задан в формате json, тогда имя файла должно оканчиваться на ".json", либо в человечитаемом формате, 
где символы имеют следующее значение:

- '@' - стена;
- '.' - конечная точка;
- '+' - игрок;
- 'x' - ящик (обратите внимание, символ английский).

## Архитектура

### Описание классов

//где-то тут диаграммы

#### Logic

_Controller_ - является прослойкой между пользователем, ui и бизнес-логикой, дёргает необходимые окна/логику как реакцию 
на действия пользователя.

_Game_ - класс, реализовывающий бизнес-логику.

_Solver_ - ищет решение для конкретной карты.

_GenerateLevel_ - осуществляет генерацию уровня.

#### User Interface

За прорисовку отвечает набор классов, лежащих в папке ui.

_PrintAndManage_ - обёртка над библиотекой Lanterna, которая хранит в себе необходимые классы для работы с терминалом и
осуществляет с ними не посредственное взаимодействие.

_WindowImpl_ - является реализацией интерфейса ``WindiwInterface``, хранит в себе класс _PrintAndManage_, предоставляет
дефолтную реализацию базовых методов для окон в системе.

_LogoWindow_ - окно с логотипом.

_GameWindow_ - окно с уровнем.

#### Game objects

_GameObject_ - общий класс для игровых объектов, задает состояние - символ объекта и позиция.

_Box_ - представляет собой ящик, имеет разные цвета в зависимости от того, находится ящик на конечной точке или нет.

_Wall_ - представляет собой стену.

_Endpoint_ - конечная точка, куда необходимо поместить ящики.

_Player_ - класс игрока.

#### Вспомогательные классы

_Commands_ - класс, содержащий команды для терминала.

_Direction_ - енам, содержащий направления движения.

_Symbols_ - класс, содержащий набор ``TextCharacter``, используемых в системе для печати.

_FileUtils_ - утилитный файл для работы с файлами.

## Баги

- Не отслеживается изменение размера терминала (поэтому если так делать, будет происходить непотребство)
- Не обрабатываются рантаймовые ошибки (в будущем будет окно с уведомление об ошибке или нечто подобное)
- Не отслеживается закрытие окна терминала
